
# set

>&nbsp;&nbsp;&nbsp;&nbsp;Redis 的集合以无序的方式储存多个各不相同的元素。用户可以快速地向集合添加元素，或者从集合里面 删除元素，也可以对多个集合进行集合运算操作，比
如计算并集、交集和差集。

# 元素操作
```
SADD key element [element ...]
     将一个或多个元素添加到 给定的集合里面，已经存在于集合的元素会自 动被忽略，命令返回新添加到集合的元素数量。
     命令的复杂度为 O(N)，N 为成功添加的元素数量。
SREM key element [element ...]
    移除集合中的一个或者多个元素，不存在于集合中的元素会自 动被忽略，命令返回存在并且被移除的元素数量。
    命令的复杂度为 O(N)，N 为被移除元素的数量。
SISMEMBER key element
    检查给定的元素是否存在于集合，存在的 话返回 1 ；如果元素不存在，或者 给定的键不存在，那么返回 0 。
    命令的复杂度为 O(1) 。
SCARD key
    返回集合包含的元素数量（也即是集合的基数）。
    因为 Redis 会储存集合的长度，所以命令的复杂度为 O(1) 。
SMEMBERS key
    返回集合包含的所有元素。
    命令的复杂度为 O(N) ，N 为集合的大小。当集合的基数比较大时，执行这个命令有可能会㐀成服 务器阻塞，将来会介
    绍更好的方式来迭代集合中的元素。
SPOP key
    随机地从集合中移除并返回一个元素，复 杂度为 O(1) 。
SRANDMEMBER key [count]
    如果没有给定可选的 count 参数，那么命令随机地返回集合中的一个元素。
    如果给定了 count 参数，那么：
        • 当 count 为正数，并且少于集合基数 时，命令返回一个包含 count 个元素的数组，数组中的每个元
        素各不相同。如果 count 大于或等于集合基数，那么命令返回整个集合。
        • 当 count 为负数时，命令返回一个数组，数组中的元素可能会重复出现多次，而数组的长度为
        count 的绝对值。
    和 SPOP 不同， SRANDMEMBER 不会移除被返回的元素。命令的复杂度为 O(N)，N 为被返回元素的数量。
```
# 集合运算操作
```
SDIFF key [key ...] 
    计算所有给定集合的差集，并返回结果。
    复杂度为O(N)，N 为所有参与差集计算的元素数量之和。
SDIFFSTORE destkey key [key ...]         】
    计算所有给定集合的差集，并将结果储存到 destkey 。
    复杂度是O(N)，N 为所有参与差集计算的元素数量之和。
SINTER key [key ...] 
    计算所有给定集合的交集，并返回结果。
    复杂度为O(N * M)， N 为给定集合当中基数最小的集合， M 为给定集合的个数。
SINTERSTORE destkey key [key ...] 
    计算所有给定集合的交集，并将结果储存到 destkey 。
    复杂度为O(N * M)， N 为给定集合当中基数最小的集合， M 为给定集合的个数。
SUNION key [key ...] 
    计算所有给定集合的并集，并返回结果。
    复杂度为O(N)，N 为所有参与计算的元素数量。
SUNIONSTORE destkey key [key ...] 
    计算所有给定集合的并集，并将结果储存到 destkey 。
    复杂度为O(N)，N 为所有参与计算的元素数量。
```

# 内部编码

> &nbsp;&nbsp;&nbsp;&nbsp;集合类型的内部编码有两种:


```text
1.intset(整数集合),当集合中的元素都是整数并且元素个数小于set-max-intset-entries配置(默认是512个)的时候,
redis就会选用intset来作为集合的内部实现,从而减少内存的使用。

2.hashtable(hash表),当集合类型无法满足intset的条件的时候,redis就会使用hashtable作为集合的内部实现。

```